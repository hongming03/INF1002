<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product Sentiment</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
  <div class="container">
    <h1 class="mb-4">Amazon Product Sentiment</h1>
    <form id="productForm" class="mb-3">
      <select name="product_id" id="productSelect" class="form-select mb-3">
        {% for pid in product_ids %}
        <option value="{{ pid }}">{{ pid }}</option>
        {% endfor %}
      </select>
      <button type="button" class="btn btn-primary" onclick="goToProduct()">Analyze</button>
    </form>

    <script>
      function goToProduct() {
        const pid = document.getElementById("productSelect").value;
        window.location.href = `/product/${pid}`;
      }
    </script>

    {% if sentiment_summary %}
    <div class="card mt-4">
      <div class="card-body">
        <h4>Sentiment Summary for {{ selected_product }}</h4>
        <ul>
          <li>Average Score: {{ sentiment_summary.average_score }}</li>
          <li>Positive Reviews: {{ sentiment_summary.positive }}</li>
          <li>Neutral Reviews: {{ sentiment_summary.neutral }}</li>
          <li>Negative Reviews: {{ sentiment_summary.negative }}</li>
        </ul>
      </div>
    </div>
    {% endif %}
  </div>
</body>
</html>
