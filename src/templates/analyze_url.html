<!--This is a feature to analyze url based on user input-->
{% extends "layouts/base.html" %}

{% block title %}Analyze Article{% endblock %}

{% block content %}
<div class="container mt-4">

  <h3>Analyze External Article</h3>
  
  <!-- Search Form -->
  <form action="/analyze_url" method="POST" class="d-flex mb-4">
    <input 
      type="text" 
      name="query" 
      class="form-control me-2" 
      placeholder="Paste article URL or type a subject" 
      required>
    <button type="submit" class="btn btn-primary">Analyze</button>
  </form>

  <!-- Error Handling -->
  {% if error %}
  <div class="alert alert-danger">
    {{ error }}
  </div>
  {% endif %}

  <!-- Results -->
  {% if article %}
  <div class="card mt-4">
    <div class="card-body">
      <h5>{{ article.title }}</h5>
      <p><a href="{{ article.url }}" target="_blank">{{ article.url }}</a></p>
      <hr>
      <p>{{ article.text[:1000] }}...</p>

      <h4 class="mt-4">Sentiment Summary</h4>
      <ul>
        <li class="text-success">Positive: {{ positive }}</li>
        <li class="text-secondary">Neutral: {{ neutral }}</li>
        <li class="text-danger">Negative: {{ negative }}</li>
      </ul>
      <p><strong>Average Score:</strong> {{ average_score }}</p>
    </div>
  </div>
  {% endif %}

</div>
{% endblock content %}
